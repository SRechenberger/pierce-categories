\documentclass{article}

\input{../package.tex}

\newcommand{\cpo}{\mathbf{CPO}}
\newcommand{\id}{\emph{id}}
\newcommand{\cat}[1]{\mathbf{#1}}

\begin{document}
\begin{enumerate}
\item[3.4.7]
  The ``category'' $\cpo$ has $\omega$-complete partial orders as objects and $\omega$-continuous functions as arrows.
  We prove $\cpo$ is a category by showing the identity and associative laws hold.
  \begin{itemize}
  \item[\emph{assoc}]
    We show that for any two arrows $f : A \rightarrow B$ and $g : B \rightarrow C$ in $\cpo$, their composition $g \circ f$ is also in $\cpo$.
    First, $f$'s monotonicity implies that for all $p_1 \sqsubseteq_A p_2$, we have $f(p_1) \sqsubseteq_B f(p_2)$.
    Now using $g$'s monotonicity, we have that $g(f(p_1)) \sqsubseteq_C g(f(p_2))$, or rather, $(g circ f)(p_1) \sqsubseteq (g \circ f)(p_2)$.
    This shows that $g \circ f$ is monotone.
    
    To see that $g \circ f$ is continuous, we observe:
    \begin{align*}
      (g \circ f) \sqcup p_n &= g(f(\sqcup p_n))
    \\\langle\emph{f continuous}\rangle    &= g(\sqcup f(p_n))
    \\\langle\emph{g continuous}\rangle    &= \sqcup g(f(p_n))
    \\                       &= \sqcup (g \circ f)(p_n)
    \end{align*}

  \item[\emph{identity}]
    For any partial order $P \in \cpo$, define the function $\id_P : P \rightarrow P$ as $\id_P(p) = p$ for all elements $p$ of the chain $P$.
    Clearly $p_1 \sqsubseteq p_2$ implies $\id_P(p_1) \sqsubseteq \id_P(p_2)$.
    Also $\id_P \sqcup p_n = \sqcup p_n = \sqcup id_P(p_n)$, so $\id_P$ is continuous and therefore in $\cpo$.

    It follows by definition that $\id_P$ is a unit for composition.
  \end{itemize}

\item[3.4.9]
  Suppose the hom-sets of $\cpo$ are ordered pointwise, such that $f \sqsubseteq f' \iff \forall a \in A.~f(a) \sqsubseteq f'(a)$.
  We have that:
  \begin{itemize}
  \item
    For every pair of $\cpo$ objects $A$ and $B$, their hom-sets are equipped with a partial ordering.
    This partial ordering is $\omega$-complete because $\sqsubseteq_A$ and $\sqsubseteq_B$ are $\omega$-complete partial orderings.
  \item
    Assuming $f \sqsubseteq f'$ and $g \sqsubseteq g'$, we can derive $g \circ f \sqsubseteq g' \circ f'$ by proving $(g \circ f)(a) \sqsubseteq (g' \circ f')(a)$ for all $a$ in the domain of $f$.
    We show this by unfolding the compositions to get $g(f(a)) \sqsubseteq g'(f'(a))$.
    Then since $f(a)$ and $f'(a)$ are in the domain of $g$ the assumption $g \sqsubseteq g'$ finishes the proof.
  \item
    We can derive $\sqcup(g_n \circ f_n) = \sqcup g_n \circ \sqcup f_n$ for $\omega$-sequences of functions $\{f_i\}$ and $\{g_i\}$ by chain continuity.

    First, $\sqcup g_n \circ \sqcup f_n \sqsubseteq \sqcup(g_n \circ f_n)$ holds if and only if for all $a$ in the domain of $\sqcup f_n$, we can prove $(\sqcup g_n \circ \sqcup f_n)(a) \sqsubseteq (\sqcup (g_n \circ f_n))(a)$.
    By chain continuity, we can expand left hand side:
    \begin{align*}
      (\sqcup g_n \circ \sqcup f_n)(a) &= (\sqcup g_n) ((\sqcup f_n) a)
    \\ &= g_n \sqcup (f_n (\sqcup a))
    \\ &= g_n (f_n (\sqcup \sqcup a))
    \\ &= g_n (f_n (\sqcup a))
    \\ &= g_n \circ f_n \sqcup a
    \\ &= \sqcup (g_n \circ f_n) a
    \end{align*}

    Second, $\sqcup g_n \circ \sqcup f_n \sqsubseteq \sqcup(g_n \circ f_n)$ because $\sqcup(g_n \circ f_n)$ is an upper bound of any composition of functions in $\{g_i\}$ and $\{f_i\}$.
    In particular, $\sqcup g_n \in \{g_i\}$ and $\sqcup f_n \in \{f_i\}$ are two such functions, so their composition is bounded above by $\sqcup(g_n \circ f_n)$.
  \end{itemize}
  Therefore $\cpo$ is an $\cat{O}$ category when the hom-sets are ordered pointwise.

\item[3.4.11]
  If $f$ is an embedding, there must be an $f^R$ such that $f^R \circ f = \id_A$.
  This $f^R$ must be unique because $\id_A$ is unique.
  Likewise, if we have a projection $f^R$ then by definition there exists an embedding $f$, and uniqueness follows because $\id_A$ is unique.

\end{enumerate}
\end{document}
